<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>detect - Pursue inner peace</title><meta name="author" content="Richard,detect0530@gmail.com"><meta name="copyright" content="Richard"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="If you can&#39;t explain it simply, you don&#39;t understand it well enough.">
<meta property="og:type" content="website">
<meta property="og:title" content="detect">
<meta property="og:url" content="https://detect42.github.io/page/6/index.html">
<meta property="og:site_name" content="detect">
<meta property="og:description" content="If you can&#39;t explain it simply, you don&#39;t understand it well enough.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://detect42.github.io/img/ff.jpg">
<meta property="article:author" content="Richard">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://detect42.github.io/img/ff.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://detect42.github.io/page/6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":1000},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'detect',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-06-09 23:02:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/1.css"><meta name="generator" content="Hexo 6.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/ff.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">101</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/topimg.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="detect"><span class="site-name">detect</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">detect</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/detect42" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:detect0530@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/84628cd6.html" title="DQN coding exercise">DQN coding exercise</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-02-03T11:47:25.000Z" title="Created 2024-02-03 19:47:25">2024-02-03</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RL/">RL</a></span></div><div class="content"> DQN theory and practice 
 detect0530@gmail.com 
以下是DQN完成atari游戏Pong的代码实现，包括了完整的朴素DQN实现，以及experience replay和target network的改进。代码实现基于PyTorch和OpenAI Gym。
并使用Chatgpt生成相应的代码注释，以及各个package api的介绍。

123USE_CUDA = torch.cuda.is_available()dtype = torch.cuda.FloatTensor if torch.cuda.is_available() else torch.FloatTensorVariable = lambda *args, **kwargs: autograd.Variable(*args, **kwargs).cuda() if USE_CUDA else autograd.Variable(*args, **kwargs)
这段代码主要是用于检查是否可用CUDA（用于GPU加速），然后根据可用性设置相应的数据类型和变量。


USE_C ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/cb58cbf7.html" title="DQN experiment: Pong">DQN experiment: Pong</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-02-03T07:39:32.000Z" title="Created 2024-02-03 15:39:32">2024-02-03</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RL/">RL</a></span></div><div class="content"> DQN theory and practice 
 detect0503@gmail.com 
original paper: Playing Atari with Deep Reinforcement Learning

Abstract
This is a simple experiment to train a DQN agent to play atari game Pong. This paper proposes a novel approach, directly using the entire game screen as input for the model. The model autonomously determines what features to extract, and even the specific features it learns are not of primary concern. What matters is that the model can make correct actions in various states,  ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/21249fb3.html" title="演化算法HW4 BBO黑箱芯片放置问题">演化算法HW4 BBO黑箱芯片放置问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-26T05:38:17.000Z" title="Created 2024-01-26 13:38:17">2024-01-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NJU-course/">NJU course</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NJU-course/HSEA/">HSEA</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/">实验报告</a></span></div><div class="content"> Macro placement by black-box optimization 
 detect0530@gmail.com 

1 问题分析
通过阅读发下来的code，发现需要我调整的黑箱问题是，给定一组长度为dim，有上下界的整数序列。
实例代码使用随机搜索的方法，通过不断生成随机数列来更新最优答案。
由于BBO已经为我们设计好了评价黑盒，我们只需要考虑如何在这组数列上进行演化算法即可。
2 基本的演化算法设计 &amp; 比较不同mutation,crossover的性能
2.1 种群设置
由于单次黑盒评估运算量巨大（2-5s），我们需要尽可能减少黑盒评估次数。
所以种群大小一开始定为10
2.2 selection
初始算法中，我将随机从种群中选出父代。
2.3 mutaion

随机选择两个位置进行位置交换
以概率p1对每个位置进行随机变化

2.4 crossover
选出两个父代后：

随机选择断点，然后将两个父代的断点两侧进行交换
以概率p2对每个位置进行父代交换

survival selection
以n+n策略进行精英保留，保存最优的n个个体
设计好基本的演 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/9f0fbe76.html" title="《深度强化学习》reading notes">《深度强化学习》reading notes</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-23T12:46:02.000Z" title="Created 2024-01-23 20:46:02">2024-01-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/RL/">RL</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/RL/book-notes/">book notes</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RL/">RL</a></span></div><div class="content">《深度强化学习》reading notes 
 detect0530@gmail.com 

价值学习
Optimal Bellman Equation

On-Policy and Off-policy
按照交互中的策略与最终的策略是否一致，可以分为两类：On-Policy和Off-Policy。

SARSA Algorithm

可以说和Q学习基本类似，但是SARSA是On-Policy，而Q学习是Off-Policy。因为在每一次选择action时都是基于当前的策略函数π\piπ来选择的(而不是Q学习中ϵ−greedy\epsilon-greedyϵ−greedy抽样和最优action选择)。


同时引入多步TD的做法，指应用πnow\pi_{now}πnow​连续交互m次，然后再用梯度优化，因为真实数据由一步变成了多步，更稳定效果更好。
训练流程中走n步，对前n-m步都可以用来更新梯度，最后sigma求和梯度即可。


由此看来多步TD是比较抽象化的做法，当步数确定为极端情况时，实际上有之前讨论过的含义：

补充一点上图中提到的相关概念：


由此可见，多步TD算法如果步数 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/64839790.html" title="浅析Alpha-Go">浅析Alpha-Go</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-19T16:04:10.000Z" title="Created 2024-01-20 00:04:10">2024-01-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/RL/">RL</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/RL/book-notes/">book notes</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RL/">RL</a></span></div><div class="content">
 浅析Alpha-Go 
 detect0530@gmail.com 
训练&amp;执行步骤

先找很多对局素材，进行监督学习，然后分别训练policy和value network。
最后再依据policy和value函数进行蒙特卡洛树搜索。
Policy Network

通过191948的tensor表示状态，然后用convolutional layer提取特征，最后用softmax输出每个动作的概率。(361个动作)
一开始先用人的对局用来学习初步的策略网络。

用behavior cloning的方法（imitation learning 与reinforcement learning区别在于有无reword），让policy network去模仿人的对局。


其实就是一个交叉熵作为loss function的多分类问题。
Behavior cloning缺点是效果不好，没见过的话，不知道怎么走。
所以我们需要用reinforcement learning来改进behavior cloning训练出的policy network。
Train Policy network ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/5ace3b8b.html" title="DRL: Actor-Critic Method">DRL: Actor-Critic Method</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-19T13:56:13.000Z" title="Created 2024-01-19 21:56:13">2024-01-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/RL/">RL</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/RL/book-notes/">book notes</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RL/">RL</a></span></div><div class="content">
 DRL: Actor-Critic Method 
 detect0530@gmail.com 
基本概念
Discounted Return UtU_tUt​

这个东西是一个随机变量，随机性由两部分构成，第一是Policy function给定状态s后选择的action。第二是State transition function给定状态s和action a后转移到下一个状态s’的概率。
Action-value Function Q(s,a)

给定状态s和action a，这个函数返回的是在这个状态下采取这个action的期望回报。注意这个回报和策略函数π\piπ有关，因为策略函数决定了在这个状态下采取哪个action。
Optimal Action-value Function Q∗(s,a)Q^*(s,a)Q∗(s,a)

选择一个在当前状态和动作下最优的策略函数π\piπ,让期望回报最大。
State-value Function Vπ(s)V_{\pi}(s)Vπ​(s)
Vπ(st)V_{\pi}(s_t)Vπ​(st​)是对一个状态的评价，这个评价是基于决策函数π\ ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/89b04f08.html" title="网络流">网络流</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-11T03:18:54.000Z" title="Created 2024-01-11 11:18:54">2024-01-11</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/algorithm/">algorithm</a></span></div><div class="content">网络流的基本概念

网络流问题都是建立在类似上图的有向图之上，有向图的边的权值代表容量。其中A代表源点，C代表汇点，一般考察的问题情景就是从A中流出流量，经过这些有向边，最终汇集到C中。像这样的具有源点和汇点，并且每条边的权值均为正数的有向图就被称作是容量网络，图中的这些边被称作是弧，弧的权值被称作弧的容量，它代表着能够通过这条弧的最大流量。而经过弧上的实际流量被称作弧的流量，所有这些弧的流量所组成的集合就是所谓的网络流。
直观上不难发现符合实际情况的网络流的特点，或者说是限制条件。首先每条弧上的流量不能超过其容量，还有对于除了源点和汇点以外的每个点来说，流入它的流量之和必须与从它流出的流量之和相等，即平衡条件。那么满足这两个条件的网络流就被称作是可行流，可行流的流量定义为从源点所流出的所有流量之和。在所有的可行流中，流量最大的那个被称作是最大流。
对于一串顶点序列(U,U1,U2,U3,…,V)(U,U1,U2,U3,…,V)(U,U1,U2,U3,…,V)，如果满足U是源点，V是汇点，并且序列中每相邻两个顶点之间均存在一条弧，那么就称这个顶点序列为一条链，注意这里并不要求这条弧的方 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/627a1a16.html" title="斜率优化">斜率优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-11T03:17:57.000Z" title="Created 2024-01-11 11:17:57">2024-01-11</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/algorithm/">algorithm</a></span></div><div class="content">其实打代码的感觉有点像网络流，重点是推导，剩下就是个板子。
知识点及推导
总结一下算法流程


先推出一般形式 dp[i]=dp[j]+xxxx


展开移项



定义只有i的为b（这样求出b就相当于求dp[i]）
定义只有j的为y（是定点）
对于有i,j的为j项为x，i项为a

现在（x,y）(i之前的)就定下来了
现在维护一个凸包
若q[h]和q[h+1]的斜率比当前a小了，那q[h]就没用了
还有对于队尾的判断，如果q[i]和q[tail]的斜率比q[tail]和q[tail-1]小，那么对于tail也没用武之地了
最后对于状态i的最优策略点j就是q[h]了，O1跟新即可
Updated 2020/09/13
感觉之前写的太片面和肤浅了，这里补一发关于依据单调性的不同做法。
- x,kx,kx,k都是单调的，那么可以方便的直接维护凸包，同时因为凸包斜率单#调，所以决策也有单调性。可以在总复杂度O(n)O(n)O(n)下解决问题

- 只有xxx单调，依然可以建出凸包，但是决策不满足单调性，可以在凸包上二分最佳位置。时间复杂度：O(nlogn)O(nlogn)O(nlogn)

 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/1c32d91d.html" title="快速傅立叶变化FFT">快速傅立叶变化FFT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-11T03:16:41.000Z" title="Created 2024-01-11 11:16:41">2024-01-11</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/algorithm/">algorithm</a></span></div><div class="content">FFT是一种可以在O(n∗logn)O(n*log_n)O(n∗logn​)的优秀时间复杂度里，求出两个多项式乘积的优秀算法。
首先，我们如何表示一个（n−1）（n-1）（n−1）次多项式？


用每一项的系数来表示


用n个点的坐标来表示


所以算两个多项式乘积时，如果暴力计算系数，是O(n2)O(n^2)O(n2)的。
但是如果我们有这两个已知多项式的点的表达式，那么我们只需要O(n)O(n)O(n)的时间就可以得到带求多项式的点表达式。
不幸的是，为了得到两个多项式的n个点坐标，在横坐标随记下我们仍需要O(n2)O(n^2)O(n2)的时间来完成。
所以有没有什么办法可以优化找点的过程了。
以为名叫傅里叶的牛人发现了复数可以完美解决这个问题。
具体来说，我们再复数坐标戏中引入单位元（类比三角函数），因为复数有个性质，两复数乘积的几何意义是模长相乘，辐角相加。
因为我们取得点在单位圆上，于是同一个复数的nnn次乘积在几何意义上表现为辐角的成倍增长。
前方高能，我们开始搞事情了。
设带求多项式为F(x)
我们按照多项式次数的就分成两节。
即F(x)=FL(x2)+x∗FR(x2） ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/70021e48.html" title="SAM 后缀自动机">SAM 后缀自动机</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-01-11T03:15:42.000Z" title="Created 2024-01-11 11:15:42">2024-01-11</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/algorithm/">algorithm</a></span></div><div class="content">（p.s: code是真的短）
从头开始的详细版见WiKi
主要的难点都在后缀边和点的划分上。
重新声明一下定义:


我们按照这个字串在原串中每一个出现的最后一位的位置集合为一个点，即一个点里可以包含多个字串，我们钦定每个点中最长的字串长度为lenilen_ileni​。


后缀边 按照点的集合定义，后缀边其实是把这些点按照集合包含关系连了起来（只会连所有包含关系中len最小的那个点），即成一棵树。


然后就好办了啊
建立SAM算法流程简析


首先建立前缀的节点，集合只有前缀本身


从上一个前缀节点开始向上搜索看有没有点有新加入字符的正向连边。（注意正向连边图是一个DAG）


分三种情况：



若全没有，则该字符没出现过，fa-&gt;root即可

找到存在p，设q为p的该字符的对应点，


若 len[p]+1==len[q]len[p]+1==len[q]len[p]+1==len[q] ，因为p是原来串的最长可以跟字符s的点，原串与新串差1，如果len也差1，那么q必定是包含新串最长的点。


现在没发再特判了，需要新建立一个点来解决问题。


这个点继承q点后面 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/5/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/#content-inner">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><a class="extend next" rel="next" href="/page/7/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/ff.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Richard</div><div class="author-info__description">If you can't explain it simply, you don't understand it well enough.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">101</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/detect42"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/detect42" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:detect0530@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">blog is buliding!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/fe95d4ff.html" title="Auto-encoder">Auto-encoder</a><time datetime="2025-06-09T15:54:03.000Z" title="Created 2025-06-09 23:54:03">2025-06-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/725267af.html" title="矩阵计算">矩阵计算</a><time datetime="2025-06-09T15:13:28.000Z" title="Created 2025-06-09 23:13:28">2025-06-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/cf383760.html" title="好运设计">好运设计</a><time datetime="2025-05-29T16:53:14.000Z" title="Created 2025-05-30 00:53:14">2025-05-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/ffeffb62.html" title="JAX base">JAX base</a><time datetime="2025-05-05T16:55:07.000Z" title="Created 2025-05-06 00:55:07">2025-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/99b13c4e.html" title="Python Multiprocess">Python Multiprocess</a><time datetime="2025-05-05T15:55:07.000Z" title="Created 2025-05-05 23:55:07">2025-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/769e1755.html" title="C++ Embedding Python">C++ Embedding Python</a><time datetime="2025-05-05T13:23:44.000Z" title="Created 2025-05-05 21:23:44">2025-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/7c8d087b.html" title="Python tips">Python tips</a><time datetime="2025-05-01T15:45:07.000Z" title="Created 2025-05-01 23:45:07">2025-05-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/69f0d1e1.html" title="Pandas Tips">Pandas Tips</a><time datetime="2025-05-01T15:23:44.000Z" title="Created 2025-05-01 23:23:44">2025-05-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/9fbb006.html" title="生成式奖励模型的几种方法">生成式奖励模型的几种方法</a><time datetime="2025-03-25T02:02:47.000Z" title="Created 2025-03-25 10:02:47">2025-03-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/78eeacc4.html" title="Let’s Verify Step by Step">Let’s Verify Step by Step</a><time datetime="2025-03-24T14:02:47.000Z" title="Created 2025-03-24 22:02:47">2025-03-24</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DL/"><span class="card-category-list-name">DL</span><span class="card-category-list-count">17</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DL/Lee-s-HW/"><span class="card-category-list-name">Lee's HW</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DL/Lee-s-notes/"><span class="card-category-list-name">Lee's notes</span><span class="card-category-list-count">15</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DL/code/"><span class="card-category-list-name">code</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Math/"><span class="card-category-list-name">Math</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Math/Bayesian-Network-and-MCMC/"><span class="card-category-list-name">Bayesian Network and MCMC</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/NJU-course/"><span class="card-category-list-name">NJU course</span><span class="card-category-list-count">11</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/NJU-course/Crypto/"><span class="card-category-list-name">Crypto</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/LLM/" style="font-size: 1.1em; color: #999">LLM</a> <a href="/tags/algorithm/" style="font-size: 1.42em; color: #99a6b7">algorithm</a> <a href="/tags/GAN/" style="font-size: 1.1em; color: #999">GAN</a> <a href="/tags/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/" style="font-size: 1.3em; color: #99a1ac">实验报告</a> <a href="/tags/vim/" style="font-size: 1.1em; color: #999">vim</a> <a href="/tags/c/" style="font-size: 1.14em; color: #999b9d">c++</a> <a href="/tags/git/" style="font-size: 1.1em; color: #999">git</a> <a href="/tags/diffusion/" style="font-size: 1.22em; color: #999ea4">diffusion</a> <a href="/tags/python/" style="font-size: 1.38em; color: #99a4b4">python</a> <a href="/tags/ML/" style="font-size: 1.26em; color: #999fa8">ML</a> <a href="/tags/hexo/" style="font-size: 1.1em; color: #999">hexo</a> <a href="/tags/tool/" style="font-size: 1.14em; color: #999b9d">tool</a> <a href="/tags/note/" style="font-size: 1.1em; color: #999">note</a> <a href="/tags/paper/" style="font-size: 1.34em; color: #99a3b0">paper</a> <a href="/tags/GPT/" style="font-size: 1.1em; color: #999">GPT</a> <a href="/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/" style="font-size: 1.1em; color: #999">神经网络</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.18em; color: #999ca1">随笔</a> <a href="/tags/DS/" style="font-size: 1.1em; color: #999">DS</a> <a href="/tags/Metabit/" style="font-size: 1.1em; color: #999">Metabit</a> <a href="/tags/catalog/" style="font-size: 1.1em; color: #999">catalog</a> <a href="/tags/RL/" style="font-size: 1.5em; color: #99a9bf">RL</a> <a href="/tags/resume/" style="font-size: 1.1em; color: #999">resume</a> <a href="/tags/nju/" style="font-size: 1.1em; color: #999">nju</a> <a href="/tags/Quant/" style="font-size: 1.1em; color: #999">Quant</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 1.46em; color: #99a7bb">机器学习</a> <a href="/tags/HW/" style="font-size: 1.14em; color: #999b9d">HW</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 1.1em; color: #999">实习</a> <a href="/tags/linux/" style="font-size: 1.1em; color: #999">linux</a> <a href="/tags/OS/" style="font-size: 1.1em; color: #999">OS</a> <a href="/tags/math/" style="font-size: 1.1em; color: #999">math</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">May 2025</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">February 2025</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">January 2025</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">May 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">April 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">March 2024</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">February 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">January 2024</span><span class="card-archive-list-count">16</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">December 2023</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">November 2023</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">October 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">September 2023</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">July 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">June 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">March 2023</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">101</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2023-03-23T12:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">264.1k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-06-09T15:02:52.484Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/topimg.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Richard</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>